<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Programacion Asincrona</title>
</head>

<body>

  <script>

   let timeId= setInterval(() => alert("Cuidado"), 2000); // Guardamos una funcion que va a arrojar un alerta en forma de ventana cada 2 seg

    clearInterval(timeId); //Con esta funcion cancelamos el metodo anterior



//Ejemplo de codigo sincrono bloqueable:

// Las funciones se van apilando en una cola y se van ejecutando de una a la vez, siempre empezando por la ultima que se apilo (LIFO)

    const ejecutarSincrono = () =>{

      console.log("Inicio");

      function uno(){

        console.log("Uno");
        dos();
        console.log("Tres")
      }

      function dos(){

        console.log("Dos");
      }

      uno();
      console.log("Fin");


    }

    ejecutarSincrono();



    //Ejemplo de codigo asincrono no bloqueable:

    //El single thread no se bloqueara en ningun momento ya que las funciones asincronas permiten que el codigo continue ejecutandose

    const ejecutarSincrono2 = () => {

      console.log("Inicio dos");

      function unoAsin(){

        setTimeout( () => {

          console.log("1");

        }, 200);

        dosAsin();
        console.log("3");

      }

      function dosAsin(){

        setTimeout( () =>{

          console.log("2");
        }, 2000)
      }

      unoAsin();
      console.log("Terminar");

    }

    ejecutarSincrono2();
    console.log(navigator);


    // Callbacks

   const funcion = (callback) => {

         setTimeout(()=>{

           console.log("Hola");
           callback();
         }, 5000);

         console.log("Aca estoy")

    }

    const sumar = () => {

      console.log(5+3);
    }


    funcion(sumar);


    // Promises


// Guardamos el objeto promesa en una variable, la promesa recibe una arrow function con dos parametros, los cuales son los estados de la promesa

    const promesa = new Promise((resolve,reject)=>{

      let flag = false;

      if(!flag) return Promise.reject(new Error('fail')); // Si es falso el estado pasa a reject y tira error

      setTimeout( () =>{

        resolve({
        nombre: "demian"
      });

      }, Math.random() * 5000);


    });

  /*  promesa
    .then((message)=>{
      console.log("Estas adentro de la promesa");
      console.log(message);


    })
    .catch(error => console.log(error));

*/
    // Async - Await

    const funcionAsyn = async () => {

      try {

        console.log("Dentro de la asincronia");
        const obj = await promesa; // Con await logramos que el codigo espere a que se cumpla la promesa para ejecutar lo siguiente
        console.log(obj);

      } catch (error) {

        console.log(error);

      }
    }

    funcionAsyn();








  </script>

</body>
</html>
